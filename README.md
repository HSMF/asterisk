# Asterisk - LR(1) Parser Generator

Not the most efficient parser generator but it's cool, I guess<sup>TM</sup>

## Development

To run the generator, execute this:

```sh
dune exec -- ./main.exe
```

This will generate several files, TODO: only generate on demand

- `table.html`
- `hey.dot`
- `parser.js`
- `parser.java`

To generate a graph of the DFA, `graphviz` is required to be installed:

```sh
dot -Tsvg -{G,E,N}fontname=monospace -O hey.dot
```

## Grammar Specification Files

An Asterisk grammar specification file has the following structure

```
TARGET = target language
PRELUDE
  // your setup code goes here
PRELUDE

# this is a line comment

rule: type
  | case 1 -> { expression if matched }
  | case 2 -> { expression if matched }
```

Supported values for `TARGET` are

- `ocaml`
- `java`
- `javascript` (or, equivalently, `js`)

The prelude may contain any string of characters, except for a single line containing only `PRELUDE`

Identifiers (rules and terminals/non-terminals) must start with an alpha*betic* character or `_`,
optionally followed by alpha*numeric* characters or `_`

Cases are a white space separated list of identifiers. If the identifier matches the name of a rule, it is treated as a non-terminal, otherwise it is treated as a token. The name of the token must match with the name of the token generated by some lexer


The expression that is applied on match must be a valid expression in the target language. It may contain braces (`{}`) but those must be balanced. For more information see the language specific expression rules (which are TBA)


## TODO

- actually usable cli interface
- custom grammars without recompiling the generator :D
  - grammar file format
- support more languages
- support N languages by establishing some table IR and emitting that ?
- lexer generator
- doc: language specific expression rules
